(this.webpackJsonpkeeper=this.webpackJsonpkeeper||[]).push([[0],{65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var i=n(13),o=n.n(i),r=(n(65),n(66),n(67),n(35)),c=n(8),l=n(2),a=n(53),s=n.n(a),u=n(20),d=n.n(u),j=n(31),m=n(14),b=n(43),v=(n(86),n(70),b.a.initializeApp({apiKey:"AIzaSyAlCeauan3Y4VcMNqMzpNv8dGMKdubBR4E",authDomain:"noteskeepers.firebaseapp.com",projectId:"noteskeepers",storageBucket:"noteskeepers.appspot.com",messagingSenderId:"349974173689",appId:"1:349974173689:web:a2bb7b75a7d91b10174f28",measurementId:"G-FNFGL8YH49"}),b.a.firestore()),p=function(e){return new Date(e).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})},x=n(4),f={user:{uid:"",email:"",name:"",imgURL:"",isNewUser:!0,signInMethod:"",createdTime:"",lastSignInTime:""},login:function(){},logout:function(){},error:""},h=Object(l.createContext)(f);function O(){return Object(l.useContext)(h)}function g(e){var t=e.children,n=Object(c.f)(),i=Object(l.useState)(),o=Object(m.a)(i,2),r=o[0],a=o[1],s=Object(l.useState)(),u=Object(m.a)(s,2),f=u[0],O=u[1],g=function(){var e=Object(j.a)(d.a.mark((function e(){var t,i,o,r,c,l,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new b.a.auth.GoogleAuthProvider,e.prev=1,e.next=4,b.a.auth().signInWithPopup(t);case 4:return r=e.sent,c=r.user,l=r.additionalUserInfo,s={uid:null===c||void 0===c?void 0:c.uid,email:null===c||void 0===c?void 0:c.email,name:null===c||void 0===c?void 0:c.displayName,imgURL:null===c||void 0===c?void 0:c.photoURL,isNewUser:null===l||void 0===l?void 0:l.isNewUser,signInMethod:null===c||void 0===c?void 0:c.providerId,isAnonymous:null===c||void 0===c?void 0:c.isAnonymous,createdTime:p(null===c||void 0===c||null===(i=c.metadata)||void 0===i?void 0:i.creationTime),lastSignInTime:p(null===c||void 0===c||null===(o=c.metadata)||void 0===o?void 0:o.lastSignInTime)},a(s),e.prev=8,e.next=11,v.collection("users").doc(null===c||void 0===c?void 0:c.uid).set(s);case 11:n.push("/keeper/".concat(null===c||void 0===c?void 0:c.displayName)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),O(e.t0||"Failed to save user data!");case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(1),O(e.t1||"Failed to login");case 22:case"end":return e.stop()}}),e,null,[[1,19],[8,14]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.auth().signOut();case 2:n.push("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){b.a.auth().onAuthStateChanged((function(e){var t,n;if(!(null===e||void 0===e?void 0:e.email))return a(void 0);a({uid:null===e||void 0===e?void 0:e.uid,email:null===e||void 0===e?void 0:e.email,name:null===e||void 0===e?void 0:e.displayName,imgURL:null===e||void 0===e?void 0:e.photoURL,isNewUser:!1,signInMethod:null===e||void 0===e?void 0:e.providerId,isAnonymous:null===e||void 0===e?void 0:e.isAnonymous,createdTime:p(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.creationTime),lastSignInTime:p(null===e||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.lastSignInTime)})}))}),[]);var y={user:r,login:g,logout:w,error:f};return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(h.Provider,{value:y,children:t})})}var w=n(54),y=function(e){var t=Object(l.useRef)(null),n=O(),i=n.user,o=n.login;return Object(l.useEffect)((function(){var e=new s.a(t.current,{strings:["thoughts","schedule","secrets","plans","notes"],startDelay:300,typeSpeed:100,backSpeed:100,backDelay:100,smartBackspace:!0,loop:!0,showCursor:!0,cursorChar:"!"});return function(){e.destroy()}}),[]),Object(x.jsxs)("section",{className:"container grid md:grid-cols-2 md:place-items-center fullHeight",children:[Object(x.jsx)("div",{className:"place-self-center w-full",children:Object(x.jsxs)("h1",{className:"text-[3rem] lg:text-7xl xl:text-8xl w-full text-center",children:[Object(x.jsx)("span",{className:"inline-block md:mb-4",children:"Keep your"}),Object(x.jsx)("div",{className:"h-16",children:Object(x.jsx)("span",{ref:t,className:"bg-gradient-to-b from-yellow-200 via-yellow-300 to-yellow-400 \r p-2 underline inline-block"})}),Object(x.jsx)("span",{className:"inline-block mt-4 lg:mt-12",children:"in keeper"})]})}),Object(x.jsx)("div",{className:"self-start place-self-center md:self-center",children:i?Object(x.jsx)("div",{className:"px-3 py-2 rounded-md font-black text-xl shadow-md\r bg-gradient-to-b from-yellow-300 via-yellow-300 to-yellow-400\r hover:from-yellow-400 hover:to-yellow-300 ",children:Object(x.jsx)(r.b,{to:"/keeper/".concat(i.name),children:Object(x.jsx)("button",{children:"Go To Keep \u27f6"})})}):Object(x.jsxs)("div",{className:"rowCenter space-x-2 px-6 py-4 rounded-md bg-gray-400 cursor-pointer \r hover:text-gray-800",onClick:o,children:[Object(x.jsx)(w.a,{size:"2rem"}),Object(x.jsx)("button",{className:"font-medium text-xl",children:"continue with Google"})]})})]})},N=function(e){var t=(new Date).getFullYear();return console.log(t),Object(x.jsx)(x.Fragment,{})},k=n(55),S=n.n(k),I=function(e){return Object(x.jsx)("header",{children:Object(x.jsxs)("h1",{children:[Object(x.jsx)(S.a,{className:"mb-2"})," Keeper"]})})},T=function(e){var t=e.children;return Object(x.jsxs)(l.Fragment,{children:[Object(x.jsx)(I,{}),Object(x.jsx)("main",{children:t}),Object(x.jsx)(N,{})]})},C=n(109),E=n(56),U=function(e){var t=e.className,n=e.type,i=e.iconSize;return Object(x.jsxs)("button",{type:n,className:t,children:[Object(x.jsx)(E.a,{size:i})," "]})},A=function(e){var t=e.onAddNote,n=(e.isExpanded,Object(l.useRef)(null)),i=Object(l.useRef)(null);return Object(x.jsxs)("form",{onSubmit:function(e){var o,r;e.preventDefault();var c=(null===i||void 0===i||null===(o=i.current)||void 0===o?void 0:o.innerText.trim())||"Untitled",l=(null===n||void 0===n||null===(r=n.current)||void 0===r?void 0:r.innerText.trim())||"Empty note...";t({title:c,content:l})},className:"relative bg-gray-200 container sm:max-w-lg p-4 mx-auto mt-8 mb-5 rounded-lg \r shadow-2xl",children:[Object(x.jsx)("div",{id:"title",contentEditable:!0,ref:i,"data-placeholder":"Title",className:"w-full p-1 outline-none text-xl font-medium bg-gray-200 editableTitle"}),Object(x.jsx)("div",{id:"content",contentEditable:!0,ref:n,"data-placeholder":"Content...",className:"w-full p-1 outline-none text-lg bg-gray-200 editableContent"}),Object(x.jsx)(C.a,{in:!0,children:Object(x.jsx)(U,{className:"flexCenter absolute right-[18px] -bottom-[18px] border-none rounded-full \r w-9 h-9 outline-none text-white bg-yellow-400 hover:bg-yellow-500\r transitionIn",iconSize:"1.45rem",type:"button"})})]})},D=n(57),R=n(110),z=function(e){var t=e.id,n=e.title,i=e.content,o=e.onUpdateNote,r=e.onSetNote,c=e.onClose,a=Object(l.useRef)(null),s=Object(l.useRef)(null);Object(l.useEffect)((function(){a&&a.current&&(a.current.innerText=n),s&&s.current&&(s.current.innerText=i)}),[n,i]),Object(l.useEffect)((function(){var e,t;null===a||void 0===a||null===(e=a.current)||void 0===e||e.addEventListener("input",(function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.innerText;r({title:n})})),null===s||void 0===s||null===(t=s.current)||void 0===t||t.addEventListener("input",(function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.innerText;r({content:n})}))}),[r]);return Object(x.jsxs)("form",{onSubmit:function(e){var n,i;e.preventDefault();var r=(null===(n=a.current)||void 0===n?void 0:n.innerText)||"Untitled",l=(null===(i=s.current)||void 0===i?void 0:i.innerText)||"Empty note...";o({title:r,content:l},t),c()},className:"p-4 bg-gray-200 min-w-[300px] xs:min-w-[400px] sm:min-w-[500px] rounded-lg",children:[Object(x.jsx)("div",{contentEditable:!0,className:"w-full p-1 outline-none text-xl font-medium",ref:a}),Object(x.jsx)("div",{contentEditable:!0,className:"w-full p-1 outline-none text-lg",ref:s}),Object(x.jsx)("div",{className:"flex justify-end",children:Object(x.jsx)(U,{type:"submit",className:"flexCenter border-none rounded-full w-9 h-9 outline-none text-white \r bg-yellow-400 hover:bg-yellow-500 transitionIn",iconSize:"1.5rem"})})]})},F=function(e){var t=e.id,n=e.index,i=e.title,o=e.content,r=e.onDeleteNote,c=e.onUpdateNote,a=Object(l.useState)("none"),s=Object(m.a)(a,2),u=s[0],d=s[1],j=Object(l.useState)(null),b=Object(m.a)(j,2),v=b[0],p=b[1],f=function(){d("none"),v&&c(v,t)},h=Object(l.useCallback)((function(e){p(e)}),[]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(C.a,{in:!0,style:{transitionDelay:"".concat(300*n,"ms")},children:Object(x.jsxs)("li",{className:"p-3 w-60 m-4 rounded-lg bg-gray-300 shadow-lg \n                ","aria-label":t,onClick:function(){return d(t)},children:[Object(x.jsx)("h1",{className:"mb-4 text-xl font-medium",children:i}),Object(x.jsx)("p",{className:"mb-3 whitespace-pre-wrap text-lg",style:{wordWrap:"break-word"},children:o}),Object(x.jsx)("button",{onClick:function(){return r(t)},className:"relative float-right cursor-pointer hover:text-red-400",title:"Delete note",children:Object(x.jsx)(D.a,{size:"1.75rem",color:"#555"})})]})}),Object(x.jsx)(R.a,{onClose:f,open:t===u,className:"",children:Object(x.jsx)(z,{id:t,title:i,content:o,onUpdateNote:c,onSetNote:h,onClose:f})})]})},L=function(e){return v.collection("users").doc(e).collection("notes")},M=function(e){var t=O(),n=t.user,i=t.logout,o=Object(l.useState)([]),r=Object(m.a)(o,2),c=r[0],a=r[1],s=Object(l.useState)(!1),u=Object(m.a)(s,2),b=u[0],p=u[1];Object(l.useEffect)((function(){v.collection("users").doc(null===n||void 0===n?void 0:n.uid).collection("notes").onSnapshot((function(e){return a(e.docs.map((function(e){return{id:e.data().id,title:e.data().title,content:e.data().content}})))}))}),[null===n||void 0===n?void 0:n.uid]);var f=function(){var e=Object(j.a)(d.a.mark((function e(t){var i,o,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.title,o=t.content,r=i+Math.floor(1e7*Math.random()),""===i&&(i="untitled"),e.next=5,v.collection("users").doc(null===n||void 0===n?void 0:n.uid).collection("notes").doc(r).set({title:i,content:o,id:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(null===n||void 0===n?void 0:n.uid).doc(t).delete();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(j.a)(d.a.mark((function e(t,i){var o,r,c,l,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=L(null===n||void 0===n?void 0:n.uid),r=t.title,c=t.content,l=(null===r||void 0===r?void 0:r.trim())||"Untitled",a=(null===c||void 0===c?void 0:c.trim())||"Empty note...",e.next=6,o.doc(i).update({id:i,title:l,content:a});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(x.jsx)("section",{children:Object(x.jsxs)("div",{onClick:function(e){if("title"===e.target.id||"content"===e.target.id)return p(!0);p(!1)},children:[Object(x.jsx)(A,{onAddNote:f,isExpanded:b}),Object(x.jsxs)("ul",{className:"flex justify-center flex-wrap items-start",children:[c.length<1&&Object(x.jsx)(C.a,{in:!0,children:Object(x.jsx)("li",{className:"font-medium text-2xl my-40 text-center px-2",children:"Welcome to keeper, anything in mind? Write it down"})}),c.map((function(e,t){return Object(x.jsx)(F,{id:e.id,index:t,title:e.title,content:e.content,onDeleteNote:h,onUpdateNote:g},t)}))]}),Object(x.jsx)("button",{onClick:i,children:"logout"})]})})};var G=function(){return Object(x.jsx)(r.a,{children:Object(x.jsx)(T,{children:Object(x.jsx)(g,{children:Object(x.jsxs)(c.c,{children:[Object(x.jsx)(c.a,{exact:!0,path:"/",component:y}),Object(x.jsx)(c.a,{exact:!0,path:"/keeper/:userName",component:M}),Object(x.jsx)(c.a,{path:"/",render:function(){return Object(x.jsx)("h1",{children:"404"})}})]})})})})};o.a.render(Object(x.jsx)(G,{}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.23f391f4.chunk.js.map