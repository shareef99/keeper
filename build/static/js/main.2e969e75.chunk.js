(this.webpackJsonpkeeper=this.webpackJsonpkeeper||[]).push([[0],{51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var i=n(21),o=n.n(i),r=(n(51),n(52),n(53),n(24)),c=n(7),l=n(2),a=n(40),s=n.n(a),d=n(19),u=n.n(d),m=n(23),j=n(18),b=n(32),v=(n(72),n(56),b.a.initializeApp({apiKey:"AIzaSyAlCeauan3Y4VcMNqMzpNv8dGMKdubBR4E",authDomain:"noteskeepers.firebaseapp.com",projectId:"noteskeepers",storageBucket:"noteskeepers.appspot.com",messagingSenderId:"349974173689",appId:"1:349974173689:web:a2bb7b75a7d91b10174f28",measurementId:"G-FNFGL8YH49"}),b.a.firestore()),p=function(e){return new Date(e).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})},x=n(4),h={user:{uid:"",email:"",name:"",imgURL:"",isNewUser:!0,signInMethod:"",createdTime:"",lastSignInTime:""},login:function(){},logout:function(){},error:""},f=Object(l.createContext)(h);function O(){return Object(l.useContext)(f)}function g(e){var t=e.children,n=Object(c.f)(),i=Object(l.useState)(),o=Object(j.a)(i,2),r=o[0],a=o[1],s=Object(l.useState)(),d=Object(j.a)(s,2),h=d[0],O=d[1],g=function(){var e=Object(m.a)(u.a.mark((function e(){var t,i,o,r,c,l,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new b.a.auth.GoogleAuthProvider,e.prev=1,e.next=4,b.a.auth().signInWithPopup(t);case 4:return r=e.sent,c=r.user,l=r.additionalUserInfo,s={uid:null===c||void 0===c?void 0:c.uid,email:null===c||void 0===c?void 0:c.email,name:null===c||void 0===c?void 0:c.displayName,imgURL:null===c||void 0===c?void 0:c.photoURL,isNewUser:null===l||void 0===l?void 0:l.isNewUser,signInMethod:null===c||void 0===c?void 0:c.providerId,isAnonymous:null===c||void 0===c?void 0:c.isAnonymous,createdTime:p(null===c||void 0===c||null===(i=c.metadata)||void 0===i?void 0:i.creationTime),lastSignInTime:p(null===c||void 0===c||null===(o=c.metadata)||void 0===o?void 0:o.lastSignInTime)},a(s),e.prev=8,e.next=11,v.collection("users").doc(null===c||void 0===c?void 0:c.uid).set(s);case 11:n.push("/keeper/".concat(null===c||void 0===c?void 0:c.displayName)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),O(e.t0||"Failed to save user data!");case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(1),O(e.t1||"Failed to login");case 22:case"end":return e.stop()}}),e,null,[[1,19],[8,14]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.auth().signOut();case 2:n.push("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){b.a.auth().onAuthStateChanged((function(e){var t,n;if(!(null===e||void 0===e?void 0:e.email))return a(void 0);a({uid:null===e||void 0===e?void 0:e.uid,email:null===e||void 0===e?void 0:e.email,name:null===e||void 0===e?void 0:e.displayName,imgURL:null===e||void 0===e?void 0:e.photoURL,isNewUser:!1,signInMethod:null===e||void 0===e?void 0:e.providerId,isAnonymous:null===e||void 0===e?void 0:e.isAnonymous,createdTime:p(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.creationTime),lastSignInTime:p(null===e||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.lastSignInTime)})}))}),[]);var y={user:r,login:g,logout:w,error:h};return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(f.Provider,{value:y,children:t})})}var w=n(41),y=function(e){var t=Object(l.useRef)(null),n=O(),i=n.user,o=n.login;return Object(l.useEffect)((function(){var e=new s.a(t.current,{strings:["thoughts","schedule","secrets","plans","notes"],startDelay:300,typeSpeed:100,backSpeed:100,backDelay:100,smartBackspace:!0,loop:!0,showCursor:!0,cursorChar:"!"});return function(){e.destroy()}}),[]),Object(x.jsxs)("section",{className:"container grid md:grid-cols-2 md:place-items-center fullHeight",children:[Object(x.jsx)("div",{className:"place-self-center w-full",children:Object(x.jsxs)("h1",{className:"text-[3rem] lg:text-7xl xl:text-8xl w-full text-center",children:[Object(x.jsx)("span",{className:"inline-block md:mb-4",children:"Keep your"}),Object(x.jsx)("div",{className:"h-16",children:Object(x.jsx)("span",{ref:t,className:"bg-gradient-to-b from-yellow-200 via-yellow-300 to-yellow-400 \r p-2 underline inline-block"})}),Object(x.jsx)("span",{className:"inline-block mt-4 lg:mt-12",children:"in keeper"})]})}),Object(x.jsx)("div",{className:"self-start place-self-center md:self-center",children:i?Object(x.jsx)("div",{className:"px-3 py-2 rounded-md font-black text-xl shadow-md\r bg-gradient-to-b from-yellow-300 via-yellow-300 to-yellow-400\r hover:from-yellow-400 hover:to-yellow-300 ",children:Object(x.jsx)(r.b,{to:"/keeper/".concat(i.name),children:Object(x.jsx)("button",{children:"Go To Keep \u27f6"})})}):Object(x.jsxs)("div",{className:"rowCenter space-x-2 px-6 py-4 rounded-md bg-gray-400 cursor-pointer \r hover:text-gray-800",onClick:o,children:[Object(x.jsx)(w.a,{size:"2rem"}),Object(x.jsx)("button",{className:"font-medium text-xl",children:"continue with Google"})]})})]})},N=function(e){var t=(new Date).getFullYear();return console.log(t),Object(x.jsx)(x.Fragment,{})},k=n(42),I=n.n(k),S=function(e){return Object(x.jsx)("header",{children:Object(x.jsxs)("h1",{children:[Object(x.jsx)(I.a,{className:"mb-2"})," Keeper"]})})},T=function(e){var t=e.children;return Object(x.jsxs)(l.Fragment,{children:[Object(x.jsx)(S,{}),Object(x.jsx)("main",{children:t}),Object(x.jsx)(N,{})]})},C=n(87),A=n(43),U=function(e){var t=e.onAddNote,n=(e.isExpanded,Object(l.useRef)(null)),i=Object(l.useRef)(null);return Object(x.jsxs)("form",{onSubmit:function(e){var o,r;e.preventDefault();var c=null===i||void 0===i||null===(o=i.current)||void 0===o?void 0:o.innerText,l=null===n||void 0===n||null===(r=n.current)||void 0===r?void 0:r.innerText;(l&&""!==l||c&&""!==c)&&(c&&""!==c||(c="Untitled"),l&&""!==l||(l="Empty note..."),t({title:c,content:l}),console.log({title:c,content:l}))},className:"relative bg-gray-200 container sm:max-w-lg p-4 mx-auto mt-8 mb-5 rounded-lg \r shadow-2xl",children:[Object(x.jsx)("div",{id:"title",contentEditable:!0,ref:i,"data-placeholder":"Title",className:"w-full p-1 outline-none text-xl font-medium bg-gray-200 editableTitle"}),Object(x.jsx)("div",{id:"content",contentEditable:!0,ref:n,"data-placeholder":"Content...",className:"w-full p-1 outline-none text-lg bg-gray-200 editableContent"}),Object(x.jsx)(C.a,{in:!0,children:Object(x.jsx)("button",{type:"submit",className:"flexCenter absolute right-[18px] -bottom-[18px] border-none rounded-full \r w-9 h-9 outline-none text-white bg-yellow-400 hover:bg-yellow-500\r transitionIn",title:"Add notes",children:Object(x.jsx)(A.a,{size:"1.45rem"})})})]})},D=n(44),E=function(e){var t=e.id,n=e.index,i=e.title,o=e.content,r=e.onDeleteNote;return Object(x.jsx)(C.a,{in:!0,style:{transitionDelay:"".concat(300*n,"ms")},children:Object(x.jsxs)("li",{className:"p-3 w-60 m-4 rounded-lg bg-gray-300 shadow-lg",children:[Object(x.jsx)("h1",{className:"mb-4 text-xl font-medium",children:i}),Object(x.jsx)("p",{className:"mb-3 whitespace-pre-wrap text-lg",style:{wordWrap:"break-word"},children:o}),Object(x.jsx)("button",{onClick:function(){return r(t)},className:"relative float-right cursor-pointer hover:text-red-400",title:"Delete note",children:Object(x.jsx)(D.a,{size:"1.75rem",color:"#555"})})]})})},R=function(e){var t=O(),n=t.user,i=t.logout,o=Object(l.useState)([]),r=Object(j.a)(o,2),c=r[0],a=r[1],s=Object(l.useState)(!1),d=Object(j.a)(s,2),b=d[0],p=d[1];Object(l.useEffect)((function(){v.collection("users").doc(null===n||void 0===n?void 0:n.uid).collection("notes").onSnapshot((function(e){return a(e.docs.map((function(e){return{id:e.data().id,title:e.data().title,content:e.data().content}})))}))}),[null===n||void 0===n?void 0:n.uid]);var h=function(){var e=Object(m.a)(u.a.mark((function e(t){var i,o,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.title,o=t.content,r=i+Math.floor(1e7*Math.random()),""===i&&(i="untitled"),e.next=5,v.collection("users").doc(null===n||void 0===n?void 0:n.uid).collection("notes").doc(r).set({title:i,content:o,id:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.collection("users").doc(null===n||void 0===n?void 0:n.uid).collection("notes").doc(t).delete();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("section",{children:Object(x.jsxs)("div",{onClick:function(e){if("title"===e.target.id||"content"===e.target.id)return p(!0);p(!1)},children:[Object(x.jsx)(U,{onAddNote:h,isExpanded:b}),Object(x.jsxs)("ul",{className:"flex justify-center flex-wrap items-start",children:[c.length<1&&Object(x.jsx)(C.a,{in:!0,children:Object(x.jsx)("li",{className:"font-medium text-2xl my-40 text-center px-2",children:"Welcome to keeper, anything in mind? Write it down"})}),c.map((function(e,t){return Object(x.jsx)(E,{id:e.id,index:t,title:e.title,content:e.content,onDeleteNote:f},t)}))]}),Object(x.jsx)("button",{onClick:i,children:"logout"})]})})};var F=function(){return Object(x.jsx)(r.a,{children:Object(x.jsx)(T,{children:Object(x.jsx)(g,{children:Object(x.jsxs)(c.c,{children:[Object(x.jsx)(c.a,{exact:!0,path:"/",component:y}),Object(x.jsx)(c.a,{exact:!0,path:"/keeper/:userName",component:R}),Object(x.jsx)(c.a,{path:"/",render:function(){return Object(x.jsx)("h1",{children:"404"})}})]})})})})};o.a.render(Object(x.jsx)(F,{}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.2e969e75.chunk.js.map