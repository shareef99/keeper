(this.webpackJsonpkeeper=this.webpackJsonpkeeper||[]).push([[0],{76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var r=n(10),i=n.n(r),c=(n(76),n(77),n(78),n(79),n(41)),o=n(14),a=n(1),l=n(64),s=n.n(l),u=n(12),d=n.n(u),j=n(22),b=n(15),m=n(50),x=(n(99),n(82),m.a.initializeApp({apiKey:"AIzaSyAlCeauan3Y4VcMNqMzpNv8dGMKdubBR4E",authDomain:"noteskeepers.firebaseapp.com",projectId:"noteskeepers",storageBucket:"noteskeepers.appspot.com",messagingSenderId:"349974173689",appId:"1:349974173689:web:a2bb7b75a7d91b10174f28",measurementId:"G-FNFGL8YH49"}),m.a.firestore()),v=function(e){return new Date(e).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})},f=n(4),p={user:{uid:"",email:"",name:"",imgURL:"",isNewUser:!0,signInMethod:"",createdTime:"",lastSignInTime:""},login:function(){},logout:function(){},error:""},h=Object(a.createContext)(p);function O(){return Object(a.useContext)(h)}function g(e){var t=e.children,n=Object(o.f)(),r=Object(a.useState)(),i=Object(b.a)(r,2),c=i[0],l=i[1],s=Object(a.useState)(),u=Object(b.a)(s,2),p=u[0],O=u[1],g=function(){var e=Object(j.a)(d.a.mark((function e(){var t,r,i,c,o,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new m.a.auth.GoogleAuthProvider,e.prev=1,e.next=4,m.a.auth().signInWithPopup(t);case 4:return c=e.sent,o=c.user,a=c.additionalUserInfo,s={uid:null===o||void 0===o?void 0:o.uid,email:null===o||void 0===o?void 0:o.email,name:null===o||void 0===o?void 0:o.displayName,imgURL:null===o||void 0===o?void 0:o.photoURL,isNewUser:null===a||void 0===a?void 0:a.isNewUser,signInMethod:null===o||void 0===o?void 0:o.providerId,isAnonymous:null===o||void 0===o?void 0:o.isAnonymous,createdTime:v(null===o||void 0===o||null===(r=o.metadata)||void 0===r?void 0:r.creationTime),lastSignInTime:v(null===o||void 0===o||null===(i=o.metadata)||void 0===i?void 0:i.lastSignInTime)},l(s),e.prev=8,e.next=11,x.collection("users").doc(null===o||void 0===o?void 0:o.uid).set(s);case 11:n.push("/keeper/".concat(null===o||void 0===o?void 0:o.displayName)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),O(e.t0||"Failed to save user data!");case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(1),O(e.t1||"Failed to login");case 22:case"end":return e.stop()}}),e,null,[[1,19],[8,14]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.auth().signOut();case 2:n.push("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){m.a.auth().onAuthStateChanged((function(e){var t,n;if(!(null===e||void 0===e?void 0:e.email))return l(void 0);l({uid:null===e||void 0===e?void 0:e.uid,email:null===e||void 0===e?void 0:e.email,name:null===e||void 0===e?void 0:e.displayName,imgURL:null===e||void 0===e?void 0:e.photoURL,isNewUser:!1,signInMethod:null===e||void 0===e?void 0:e.providerId,isAnonymous:null===e||void 0===e?void 0:e.isAnonymous,createdTime:v(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.creationTime),lastSignInTime:v(null===e||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.lastSignInTime)})}))}),[]);var y={user:c,login:g,logout:w,error:p};return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(h.Provider,{value:y,children:t})})}var w=n(65),y=function(e){var t=Object(a.useRef)(null),n=O(),r=n.user,i=n.login;return Object(a.useEffect)((function(){var e=new s.a(t.current,{strings:["thoughts","schedule","secrets","plans","notes"],startDelay:300,typeSpeed:100,backSpeed:100,backDelay:100,smartBackspace:!0,loop:!0,showCursor:!0,cursorChar:"!"});return function(){e.destroy()}}),[]),Object(f.jsxs)("section",{className:"container grid md:grid-cols-2 md:place-items-center fullHeight",children:[Object(f.jsx)("div",{className:"place-self-center w-full",children:Object(f.jsxs)("h1",{className:"text-[3rem] lg:text-7xl xl:text-8xl w-full text-center",children:[Object(f.jsx)("span",{className:"inline-block md:mb-4",children:"Keep your"}),Object(f.jsx)("div",{className:"h-16",children:Object(f.jsx)("span",{ref:t,className:"bg-gradient-to-b from-yellow-200 via-yellow-300 to-yellow-400 \r p-2 underline inline-block"})}),Object(f.jsx)("span",{className:"inline-block mt-4 lg:mt-12",children:"in keeper"})]})}),Object(f.jsx)("div",{className:"self-start place-self-center md:self-center",children:r?Object(f.jsx)("div",{className:"px-3 py-2 rounded-md font-black text-xl shadow-md\r bg-gradient-to-b from-yellow-300 via-yellow-300 to-yellow-400\r hover:from-yellow-400 hover:to-yellow-300 ",children:Object(f.jsx)(c.b,{to:"/keeper/".concat(r.name),children:Object(f.jsx)("button",{children:"Go To Keep \u27f6"})})}):Object(f.jsxs)("div",{className:"rowCenter space-x-2 px-6 py-4 rounded-md bg-gray-400 cursor-pointer \r hover:text-gray-800",onClick:i,children:[Object(f.jsx)(w.a,{size:"2rem"}),Object(f.jsx)("button",{className:"font-medium text-xl",children:"continue with Google"})]})})]})},N=function(e){var t=(new Date).getFullYear();return console.log(t),Object(f.jsx)(f.Fragment,{})},k=n(66),C=n.n(k),S=function(e){return Object(f.jsx)("header",{children:Object(f.jsxs)("h1",{children:[Object(f.jsx)(C.a,{className:"mb-2"})," Keeper"]})})},T=function(e){var t=e.children;return Object(f.jsxs)(a.Fragment,{children:[Object(f.jsx)(S,{}),Object(f.jsx)("main",{children:t}),Object(f.jsx)(N,{})]})},E=n(127),A=n(67),I=function(e){var t=e.className,n=e.type,r=e.iconSize;return Object(f.jsxs)("button",{type:n,className:t,children:[Object(f.jsx)(A.a,{size:r})," "]})},U=function(e,t){return x.collection("users").doc(e).collection("notes").doc(t)},D=function(){return"".concat((new Date).toLocaleDateString(void 0,{month:"short",day:"2-digit",year:"numeric"}))},F={addNote:function(e){return new Promise((function(e){return e()}))},updateNote:function(e,t){return new Promise((function(e){return e()}))},deleteNote:function(e){return new Promise((function(e){return e()}))}},R=Object(a.createContext)(F);function z(){return Object(a.useContext)(R)}function L(e){var t=e.children,n=O().user,r=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(null===n||void 0===n?void 0:n.uid,t).delete();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i={addNote:function(){var e=Object(j.a)(d.a.mark((function e(t){var r,i,c,o,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.title,i=t.content,c=r+Math.floor(1e7*Math.random()),o=D(),""===r&&(r="untitled"),a=U(null===n||void 0===n?void 0:n.uid,c),e.next=7,a.set({id:c,title:r,content:i,createdAt:o});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateNote:function(){var e=Object(j.a)(d.a.mark((function e(t,r){var i,c,o,a,l,s,u,j,b,m,x;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=U(null===n||void 0===n?void 0:n.uid,r),a=t.title,l=t.content,e.next=4,o.get();case 4:if(e.t1=i=e.sent.data(),e.t0=null===e.t1,e.t0){e.next=8;break}e.t0=void 0===i;case 8:if(!e.t0){e.next=12;break}e.t2=void 0,e.next=13;break;case 12:e.t2=i.title;case 13:return s=e.t2,e.next=16,o.get();case 16:if(e.t4=c=e.sent.data(),e.t3=null===e.t4,e.t3){e.next=20;break}e.t3=void 0===c;case 20:if(!e.t3){e.next=24;break}e.t5=void 0,e.next=25;break;case 24:e.t5=c.content;case 25:return u=e.t5,j=(null===a||void 0===a?void 0:a.trim())||s||"Untitled",b=(null===l||void 0===l?void 0:l.trim())||u||"Empty note...",m=D(),x={id:r,title:j,content:b,lastEditedAt:m},e.next=32,o.update(x);case 32:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteNote:r};return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(R.Provider,{value:i,children:t})})}var M=function(e){var t=z().addNote,n=Object(a.useRef)(null),r=Object(a.useRef)(null),i=function(){var e=Object(j.a)(d.a.mark((function e(i){var c,o,a,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.preventDefault(),a=(null===r||void 0===r||null===(c=r.current)||void 0===c?void 0:c.innerText.trim())||"Untitled",l=(null===n||void 0===n||null===(o=n.current)||void 0===o?void 0:o.innerText.trim())||"Empty note...",e.next=5,t({title:a,content:l});case 5:r&&r.current&&(r.current.innerText=""),n&&n.current&&(n.current.innerText="");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("form",{onSubmit:i,className:"relative bg-gray-200 container sm:max-w-lg p-4 mx-auto mt-8 mb-5 rounded-lg \r shadow-2xl",children:[Object(f.jsx)("div",{id:"title",contentEditable:!0,ref:r,"data-placeholder":"Title",className:"w-full p-1 outline-none text-xl font-medium bg-gray-200 editableTitle"}),Object(f.jsx)("div",{id:"content",contentEditable:!0,ref:n,"data-placeholder":"Content...",className:"w-full p-1 outline-none text-lg bg-gray-200 editableContent"}),Object(f.jsx)(E.a,{in:!0,children:Object(f.jsx)(I,{className:"flexCenter absolute right-[18px] -bottom-[18px] border-none rounded-full \r w-9 h-9 outline-none text-white bg-yellow-400 hover:bg-yellow-500\r focus:bg-yellow-500 transitionIn",iconSize:"1.45rem",type:"submit"})})]})},P=n(53),G=n(133),K=n(132),B=n(130),W=n(129),Y=function(e){var t=e.id,n=z().deleteNote,r=Object(a.useState)(null),i=Object(b.a)(r,2),c=i[0],o=i[1],l=function(){o(null)};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{type:"button",onClick:function(e){o(e.currentTarget)},children:Object(f.jsx)(P.b,{size:"1.65rem"})}),Object(f.jsxs)(K.a,{id:"options",anchorEl:c,getContentAnchorEl:null,open:Boolean(c),onClose:l,keepMounted:!0,TransitionComponent:W.a,anchorOrigin:{vertical:"top",horizontal:"right"},children:[Object(f.jsx)(B.a,{onClick:function(){n(t),l()},children:"Delete note"}),Object(f.jsx)(B.a,{onClick:l,children:"Add label"}),Object(f.jsx)(B.a,{onClick:l,children:"Make a copy"}),Object(f.jsx)(B.a,{onClick:l,children:"Add to secret"})]})]})},H=function(e){var t=e.id,n=e.title,r=e.content,i=e.onSetNote,c=e.onClose,o=Object(a.useRef)(null),l=Object(a.useRef)(null),s=O().user,u=z().updateNote,m=Object(a.useState)(""),x=Object(b.a)(m,2),v=x[0],p=x[1],h=Object(a.useState)(""),g=Object(b.a)(h,2),w=g[0],y=g[1];Object(a.useEffect)((function(){Object(j.a)(d.a.mark((function e(){var n,r,i,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(null===s||void 0===s?void 0:s.uid,t).get();case 2:i=e.sent,c=null===i||void 0===i||null===(n=i.data())||void 0===n?void 0:n.createdAt,o=null===i||void 0===i||null===(r=i.data())||void 0===r?void 0:r.lastEditedAt,p(c),y(o);case 7:case"end":return e.stop()}}),e)})))()}),[s,t]),Object(a.useEffect)((function(){o&&o.current&&(o.current.innerText=n),l&&l.current&&(l.current.innerText=r)}),[n,r]),Object(a.useEffect)((function(){var e,t;null===o||void 0===o||null===(e=o.current)||void 0===e||e.addEventListener("input",(function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.innerText;i({title:n})})),null===l||void 0===l||null===(t=l.current)||void 0===t||t.addEventListener("input",(function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.innerText;i({content:n})}))}),[i]);var N=function(){var e=Object(j.a)(d.a.mark((function e(i){var a,s,j,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.preventDefault(),j=(null===(a=o.current)||void 0===a?void 0:a.innerText)||n||"Untitled",b=(null===(s=l.current)||void 0===s?void 0:s.innerText)||r||"Empty note...",e.next=5,u({title:j,content:b},t);case 5:c();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("section",{children:Object(f.jsxs)("form",{onSubmit:N,className:"p-4 bg-gray-200 min-w-[300px] xs:min-w-[400px] sm:min-w-[500px] rounded-lg",children:[Object(f.jsx)("div",{contentEditable:!0,className:"w-full p-1 outline-none text-xl font-medium",ref:o}),Object(f.jsx)("div",{contentEditable:!0,className:"w-full p-1 outline-none text-lg",ref:l}),Object(f.jsxs)("div",{className:"mt-8 py-3 flex flex-col space-y-2",children:[w&&Object(f.jsx)("div",{className:"self-end",children:Object(f.jsxs)("span",{children:["Edited"," ",Object(f.jsx)("time",{className:"font-medium text-black",children:w})]})}),Object(f.jsxs)("div",{className:"flex items-center space-x-4",children:[Object(f.jsxs)("div",{className:"mr-auto rowCenter",children:[Object(f.jsxs)("span",{className:"",children:["created"," ",Object(f.jsx)("time",{className:"font-medium text-black",children:v})]}),Object(f.jsx)(Y,{id:t})]}),Object(f.jsx)("button",{type:"submit",className:"cursor-pointer font-medium text-xl",children:"Close"})]})]})]})})},J=function(e){var t=e.id,n=e.index,r=e.title,i=e.content,c=z(),o=c.deleteNote,l=c.updateNote,s=Object(a.useState)("none"),u=Object(b.a)(s,2),m=u[0],x=u[1],v=Object(a.useState)(null),p=Object(b.a)(v,2),h=p[0],O=p[1],g=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x("none"),!h){e.next=4;break}return e.next=4,l(h,t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=Object(a.useCallback)((function(e){O(e)}),[]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(E.a,{in:!0,style:{transitionDelay:"".concat(300*n,"ms")},children:Object(f.jsxs)("li",{className:"p-3 w-60 m-4 rounded-lg bg-gray-300 shadow-lg \n                ","aria-label":t,onClick:function(){return x(t)},children:[Object(f.jsx)("h1",{className:"mb-4 text-xl font-medium",children:r}),Object(f.jsx)("p",{className:"mb-3 whitespace-pre-wrap text-lg",style:{wordWrap:"break-word"},children:i}),Object(f.jsx)("button",{onClick:function(){return o(t)},className:"relative float-right cursor-pointer hover:text-red-400",title:"Delete note",children:Object(f.jsx)(P.a,{size:"1.75rem",color:"#555"})})]})}),Object(f.jsx)(G.a,{onClose:g,open:t===m,className:"",children:Object(f.jsx)(H,{id:t,title:r,content:i,onSetNote:w,onClose:g})})]})},q=function(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],r=t[1],i=O().user;return Object(a.useEffect)((function(){var e;(e=null===i||void 0===i?void 0:i.uid,x.collection("users").doc(e).collection("notes")).onSnapshot((function(e){return r(e.docs.map((function(e){return{id:e.data().id,title:e.data().title,content:e.data().content,createdAt:e.data().createdAt,lastEditedAt:e.data().lastEditedAt||"Original"}})))}))}),[null===i||void 0===i?void 0:i.uid]),n},V=function(e){var t=O().logout,n=q();return Object(f.jsx)("section",{children:Object(f.jsxs)("div",{children:[Object(f.jsx)(M,{}),Object(f.jsxs)("ul",{className:"flex justify-center flex-wrap items-start",children:[n.length<1&&Object(f.jsx)(E.a,{in:!0,children:Object(f.jsx)("li",{className:"font-medium text-2xl my-40 text-center px-2",children:"Welcome to keeper, anything in mind? Write it down"})}),n.map((function(e,t){return Object(f.jsx)(J,{id:e.id,index:t,title:e.title,content:e.content},t)}))]}),Object(f.jsx)("button",{onClick:t,children:"logout"})]})})};var Z=function(){return Object(f.jsx)(c.a,{children:Object(f.jsx)(T,{children:Object(f.jsx)(g,{children:Object(f.jsx)(L,{children:Object(f.jsxs)(o.c,{children:[Object(f.jsx)(o.a,{exact:!0,path:"/",component:y}),Object(f.jsx)(o.a,{exact:!0,path:"/keeper/:userName",component:V}),Object(f.jsx)(o.a,{path:"/",render:function(){return Object(f.jsx)("h1",{children:"404"})}})]})})})})})};i.a.render(Object(f.jsx)(Z,{}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.d4c4c517.chunk.js.map